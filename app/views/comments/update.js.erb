commentable = "<%= @commentable.class.name %>";
if (commentable === "Question") {
  commentable = Underflow.question;
} else if (commentable === "Answer") {
  commentable = Underflow.question.answerById("<%= @commentable.id %>");
}

<% if @comment.errors.any? %>
  commentable.commentById("<%= @comment.id %>").edit("<%= j render 'form', rows: 4 %>");
<% else %>
  commentable.commentById("<%= @comment.id %>").edit("<%= j render 'comment', comment: @comment %>");
<% end %>
