commentable = "<%= @commentable.class.name %>";
if (commentable === "Question") {
  commentable = Underflow.question;
} else if (commentable === "Answer") {
  commentable = Underflow.question.answerById("<%= @commentable.id %>");
}

<% if @comment.errors.any? %>
commentable.renderCommentForm("<%= j render 'comments/form', remote: true %>");
<% else %>
commentable.addComment("<%= j render 'comments/comment', comment: @comment %>");
<% end %>
